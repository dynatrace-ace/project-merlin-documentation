"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[270],{1340:function(e,a,t){t.r(a),t.d(a,{frontMatter:function(){return p},contentTitle:function(){return m},metadata:function(){return s},toc:function(){return l},default:function(){return c}});var n=t(7462),i=t(3366),o=(t(7294),t(3905)),r=["components"],p={sidebar_position:1},m="Creating a Template",s={unversionedId:"templates/creating-a-template",id:"templates/creating-a-template",isDocsHomePage:!1,title:"Creating a Template",description:"In addition to proctored best-practise templates, DynaWizard can be extended with custom templates. A custom template is created by uploading a configuration archive that bundles Monaco and DynaWizard configuration. Please find a step-by-step guide below.",source:"@site/docs/templates/creating-a-template.md",sourceDirName:"templates",slug:"/templates/creating-a-template",permalink:"https://dynatrace-ace.github.io/project-merlin-documentation/docs/templates/creating-a-template",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/templates/creating-a-template.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Install DynaWizard",permalink:"https://dynatrace-ace.github.io/project-merlin-documentation/docs/installation"},next:{title:"Using a Template",permalink:"https://dynatrace-ace.github.io/project-merlin-documentation/docs/templates/using-a-template"}},l=[],d={toc:l};function c(e){var a=e.components,t=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,n.Z)({},d,t,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"creating-a-template"},"Creating a Template"),(0,o.kt)("p",null,"In addition to proctored best-practise templates, DynaWizard can be extended with custom templates. A custom template is created by uploading a configuration archive that bundles ",(0,o.kt)("a",{parentName:"p",href:"https://dynatrace-oss.github.io/dynatrace-monitoring-as-code/"},"Monaco")," and DynaWizard configuration. Please find a step-by-step guide below."),(0,o.kt)("h4",{id:"step-1-create-your-monaco-configuration"},"Step 1: Create your Monaco configuration"),(0,o.kt)("p",null,"First, all entities that shall be created in Dynatrace have to be defined. These entities will eventually be deployed by Monaco. For the sake of reusablitly, DynaWizard uses the same syntax. Start by creating a folder ",(0,o.kt)("em",{parentName:"p"},"monaco"),". This folder has to contain Dynatrace environment configuration (environment.yaml) and at a ",(0,o.kt)("em",{parentName:"p"},"projects")," subfolder with at least one project. Please refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://dynatrace-oss.github.io/dynatrace-monitoring-as-code/configuration/configuration_structure"},"official Monaco documentation")," for more details."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"As of now, only a single configuration is supported per configuration type. This would NOT work:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre"},"config:\n- sample2: sample2.json\n- sample3: sample3.json\n...\n")))),(0,o.kt)("h4",{id:"step-2-parameterize-monaco-configuration"},"Step 2: Parameterize Monaco configuration"),(0,o.kt)("p",null,"Although any default Monaco configuration could in theory be applied, DynaWizard allows us to parameterize and therefore reuse configuration for multiple applications. Parameters, for which DynaWizard asks for input during an onboarding flow, have to be defined in ",(0,o.kt)("em",{parentName:"p"},"wizard.json"),' (See Step 3) and mapped in the according Monaco configuration type(s). Any value in a Monaco configuration type configuration yaml can be parameterized. It\'s as easy as wrapping a parameter id in double curly brackets: "{{ parameter_id }}". For example:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config.yaml"',title:'"config.yaml"'},'config:\n- sample1: sample1.json\nsample1:\n- name: "{{ applicationName }}" // Instead of the name place a variable to use in the Dynatrace Wizard template\n- filter: "{{ teamName }}" // Another variable\n')),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"An entity's name is also it's unique identifier. In case a template is re-applied and a name of a configuration-type's entity is changed, a new (dublicate) entity will be created. It is recommended that this behavior is communicated accordingly, for example by adding a note to any parameters that change an entity's name."))),(0,o.kt)("h4",{id:"step-3-create-your-wizard-configuration"},"Step 3: Create your Wizard configuration"),(0,o.kt)("p",null,"In addition to Monaco configuration, a ",(0,o.kt)("em",{parentName:"p"},"wizard.json")," has to be added at the project root. This json file defines:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Unique template identifier"),(0,o.kt)("li",{parentName:"ul"},"Friendly template name which will be shown in the list of templates"),(0,o.kt)("li",{parentName:"ul"},"Template description"),(0,o.kt)("li",{parentName:"ul"},"Input parameters that will be asked for as part of the onboarding form and mapped to parameters as defined in Step 2. Each parameter has to at least define an id and friendly name. The id is used to map parameters from the Wizard with parameters in the Monaco configuration."),(0,o.kt)("li",{parentName:"ul"},"Summary list, which can be used to provide additional information prior to applying a template. It is recommended to add information about which Dynatrace entities this template creates.")),(0,o.kt)("p",null,"For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="wizard.json"',title:'"wizard.json"'},'{\n  "id": "firstOnboardingForm",\n  "friendlyName": "My first application onboarding form",\n  "description": "Onboards a web application according to monitoring best practices.",\n  "parameters": [{ \n    "id": "applicationName",\n    "friendlyName": "Application Name",\n    "type": "text"\n  }, { \n    "id": "teamName",\n    "friendlyName": "Team Name",\n    "type": "text"\n  }, {\n    "id": "managementZoneName",\n    "friendlyName": "Management Zone Name",\n    "description": "Management Zone the newly onboarded application will be added to. Will be \\"Default\\" if not specified.",\n    "type": "text",\n    "optional": true\n  }],\n  "summary": [\n    "Management Zone - A management zone will be created...",\n    "Tagging rule - Lorem ..."\n  ]\n}\n')),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Make sure each parameter defines at least an id and friendly name. Furthermore, the parameters id has to match EXACTLY any parameterized Monaco values from Step 2."),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="wizard.json"',title:'"wizard.json"'},'...\n  "parameters": [{ \n    "id": "applicationName",\n    ...\n')),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="monaco/projects/project-1/configuration-type-1/config.yaml"',title:'"monaco/projects/project-1/configuration-type-1/config.yaml"'},'...\nsample1:\n- name: "{{ applicationName }}" \n...\n')))),(0,o.kt)("h4",{id:"step-4-create-and-upload-configuration-archive"},"Step 4: Create and upload configuration archive"),(0,o.kt)("p",null,"Eventually, your working directory should now look similar to:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/\n  monaco/\n    environment.yaml\n    projects/\n      project-1/\n        configuration-type-1/\n          config.yaml\n          config.json\n      .../\n  wizard.json\n")),(0,o.kt)("p",null,"Go ahead and create a zip archive from everything in your working directory."),(0,o.kt)("p",null,"In DynaWizard you can now click ",(0,o.kt)("em",{parentName:"p"},"Add new template")," in the upper right corner or go to ",(0,o.kt)("inlineCode",{parentName:"p"},"http(s)://<your DynaWizard host>/new"),". This will direct you to a form, allowing you to select and submit the earlier created zip archive."),(0,o.kt)("p",null,"A sample template can be found ",(0,o.kt)("a",{parentName:"p",href:"#"},"here"),"."))}c.isMDXComponent=!0}}]);